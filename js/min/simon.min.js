"use strict";function _classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,o){for(var t=0;t<o.length;t++){var n=o[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(o,t,n){return t&&e(o.prototype,t),n&&e(o,n),o}}(),game=function(){function e(){_classCallCheck(this,e),this.strictMode=!1,this.showingMoves=!1,this.turnCount=1,this.move=0,this.sequence=[],this.moveCount=0,this.playerMoves=[]}return _createClass(e,[{key:"counterUpdate",value:function(){$("#counter").addClass("counter-on"),this.turnCount<10?$("#counter").attr("placeholder","0"+this.turnCount):$("#counter").attr("placeholder",this.turnCount)}},{key:"reset",value:function(){this.turnCount=1,this.sequence=[],this.playerMoves=[],this.moveCount=0,this.move=0}},{key:"disableBoard",value:function(){$("#red").attr("onclick",""),$("#green").attr("onclick",""),$("#yellow").attr("onclick",""),$("#blue").attr("onclick","")}},{key:"activateBoard",value:function(){$("#red").attr("onclick","simon.player(2)"),$("#green").attr("onclick","simon.player(1)"),$("#yellow").attr("onclick","simon.player(3)"),$("#blue").attr("onclick","simon.player(4)")}},{key:"executeMove",value:function(e){colors[e].sound.play(),$(colors[e].id).css("background",colors[e].activeColor),setTimeout(function(){$(colors[e].id).css("background",colors[e].color)},300)}},{key:"executeAll",value:function(){this.executeMove(1),this.executeMove(2),this.executeMove(3),this.executeMove(4)}},{key:"winner",value:function(){20===this.turnCount&&(alert("you win!"),this.reset())}},{key:"showMoves",value:function(){var e=this;this.disableBoard(),function o(){setTimeout(function(){e.move<e.sequence.length?(e.executeMove(e.sequence[e.move]),e.move++,o()):e.activateBoard()},1e3)}()}},{key:"player",value:function(e){var o=this;if(this.playerMoves.push(e),console.log(this.sequence[this.moveCount],this.playerMoves[this.moveCount]),this.sequence[this.moveCount]===this.playerMoves[this.moveCount]){for(var t=0;t<colors.length;t++)colors[t].location===e&&o.executeMove(t);this.moveCount++,this.playerMoves.length===this.sequence.length&&(this.turnCount++,this.playerMoves=[],this.moveCount=0,setTimeout(function(){o.newMove()},1e3))}else this.playerMoves=[],this.moveCount=0,this.move=0,o.executeAll(),o.showMoves(),this.strictMode===!0&&(o.executeAll(),o.reset(),o.newMove())}},{key:"newMove",value:function(){this.winner(),this.counterUpdate();for(var e=Math.floor(4*Math.random()+1),o=0;o<colors.length;o++)colors[o].location===e&&(this.sequence.push(colors[o].location),console.log("turn: "+this.turnCount),console.log("sequence: "+this.sequence),this.move=0,this.showMoves(),this.counterUpdate())}}]),e}(),color=function(e,o,t,n){var s=arguments.length<=4||void 0===arguments[4]?{}:arguments[4];return{location:e,color:o,id:t,activeColor:n,sound:s}},green=new color(1,"#02960c","#green","#02c30f",new Audio("https://s3.amazonaws.com/freecodecamp/simonSound1.mp3")),red=new color(2,"#bf0000","#red","#e50101",new Audio("https://s3.amazonaws.com/freecodecamp/simonSound2.mp3")),yellow=new color(3,"#b8c304","#yellow","#dffb03",new Audio("https://s3.amazonaws.com/freecodecamp/simonSound3.mp3")),blue=new color(4,"#0231b0","#blue","#003de3",new Audio("https://s3.amazonaws.com/freecodecamp/simonSound4.mp3")),colors=[],simon=new game;colors.push("buffer",green,red,yellow,blue),$("#start").click(function(){simon.strictMode=!1,simon.reset(),simon.newMove()}),$("#strict").click(function(){simon.strictMode=!0,simon.reset(),simon.newMove()});